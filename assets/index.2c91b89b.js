import{d as z,r as a,y as p,x as C,C as S,o as w,c as b,G as y,l as $,i as E,j as L,w as M,v as T,a as j,n as I,R as U,T as B,I as F,z as A}from"./vendor.8243c41e.js";import{t as N,g as h,a as V}from"./elements.6bb3d81f.js";import{u as O}from"./zIndex.a9a0aa57.js";import{u as X}from"./components.101c5ac0.js";import{_ as Y}from"./elevation.8fda2ce0.js";function D(e){return["top","bottom"].includes(e)}const G={show:{type:Boolean,default:!1},alignment:{type:String,default:"top",validator:D},offsetX:{type:[Number,String],default:0},offsetY:{type:[Number,String],default:0},teleport:{type:String,default:"body"},onOpen:{type:Function},onOpened:{type:Function},onClose:{type:Function},onClosed:{type:Function},"onUpdate:show":{type:Function}};const H=z({name:"VarMenu",props:G,setup(e){const t=a(null),s=a(null),l=a(0),i=a(0),{zIndex:m}=O(()=>e.show,1),{disabled:r}=X();let d=!1;const g=n=>n==="top"?h(t.value):h(t.value)-s.value.offsetHeight,k=()=>{d=!0},v=()=>{var n;if(d){d=!1;return}!e.show||(n=e["onUpdate:show"])==null||n.call(e,!1)},o=()=>{l.value=g(e.alignment),i.value=V(t.value)};return p(()=>e.alignment,o),p(()=>e.show,async n=>{const{onOpen:u,onClose:f}=e;n&&(await A(),o()),n?u==null||u():f==null||f()}),C(()=>{o(),document.addEventListener("click",v),window.addEventListener("resize",o)}),S(()=>{document.removeEventListener("click",v),window.removeEventListener("resize",o)}),{disabled:r,zIndex:m,host:t,menu:s,top:l,left:i,toSizeUnit:N,handleClick:k,resize:o}}});function R(e,t,s,l,i,m){return w(),b("div",{class:"var-menu",ref:"host",onClick:t[1]||(t[1]=(...r)=>e.handleClick&&e.handleClick(...r))},[y(e.$slots,"default"),(w(),$(F,{to:e.teleport,disabled:!e.teleport||e.disabled},[E(B,{name:"var-menu",onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:L(()=>[M(j("div",{class:"var-menu__menu var-elevation--3",ref:"menu",style:I({top:`calc(${e.top}px + ${e.toSizeUnit(e.offsetY)})`,left:`calc(${e.left}px + ${e.toSizeUnit(e.offsetX)})`,zIndex:e.zIndex}),onClick:t[0]||(t[0]=U(()=>{},["stop"]))},[y(e.$slots,"menu")],4),[[T,e.show]])]),_:3},8,["onAfterEnter","onAfterLeave"])],8,["to","disabled"]))],512)}var c=Y(H,[["render",R]]);c.install=function(e){e.component(c.name,c)};export{c as M};
