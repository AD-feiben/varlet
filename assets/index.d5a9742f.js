import{S as Q}from"./index.1d976ff9.js";import{q as j,r as c,b as x,T as W,o as _,k as P,i as y,a as L,B as V,A as Z,I as ee,l as T,t as f,y as ne,x as M,R as te,c as b,F as R,j as U,m as oe,n as $,z as ae,d as w,h as D}from"./vendor.17911535.js";import{c as se,e as re,b as le,f as ie,w as ce}from"./components.8b8d5d8f.js";import{_ as z}from"./elevation.8aaf18d0.js";import{t as X,h as de,g as ue}from"./shared.def6a7f6.js";import{j as fe,b as ve,s as _e,n as me,r as he}from"./elements.364c0c9c.js";import{C as pe}from"./index.c29f7396.js";import{u as xe,a as F,_ as ye,b as be,c as Ce}from"./en-US.948dca5c.js";import{w as ke}from"./utils.38ecee47.js";import"./index.9d7c5781.js";const H=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY"),Y=Symbol("INDEX_BAR_COUNT_INDEX_ANCHOR_KEY");function ge(){const{bindChildren:e,childProviders:r}=se(H),{length:o}=re(Y);return{length:o,indexAnchors:r,bindIndexAnchors:e}}function Ie(){const{parentProvider:e,bindParent:r}=le(H),{index:o}=ie(Y);if(!e||!r)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:o,indexBar:e,bindIndexBar:r}}const Te={index:{type:[Number,String]}};const Be=j({name:"VarIndexAnchor",components:{VarSticky:Q},inheritAttrs:!1,props:Te,setup(e){const{index:r,indexBar:o,bindIndexBar:s}=Ie(),t=c(0),d=c(!1),a=x(()=>e.index),l=c(null),{active:m,sticky:i,cssMode:E,stickyOffsetTop:N,zIndex:C}=o;return s({index:r,name:a,ownTop:t,setOwnTop:()=>{!l.value||(t.value=l.value.$el?l.value.$el.offsetTop:l.value.offsetTop)},setDisabled:k=>{d.value=k}}),{name:a,anchorEl:l,active:m,sticky:i,zIndex:C,disabled:d,cssMode:E,stickyOffsetTop:N,Transition:W}}});function Ee(e,r,o,s,t,d){return _(),P(ee(e.sticky?"var-sticky":e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:y(()=>[L("div",Z({class:"var-index-anchor"},e.$attrs),[V(e.$slots,"default",{},()=>[T(f(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}var Ne=z(Be,[["render",Ee]]);const Ae={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:Number,default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:{type:Function},onChange:{type:Function}};const Se=j({name:"VarIndexBar",props:Ae,setup(e){const{length:r,indexAnchors:o,bindIndexAnchors:s}=ge(),t=c(null),d=c(""),a=c(null),l=c(null),m=c([]),i=c(),E=x(()=>e.sticky),N=x(()=>e.cssMode),C=x(()=>e.stickyOffsetTop),A=x(()=>e.zIndex);s({active:i,sticky:E,cssMode:N,stickyOffsetTop:C,zIndex:A});const S=n=>{var v;const u=ue(n)?n.name.value:n;u!==i.value&&(i.value=u,(v=e.onChange)==null||v.call(e,u))},k=()=>{const{scrollTop:n,scrollHeight:u}=t.value,{offsetTop:v}=l.value;o.forEach((h,p)=>{const g=h.ownTop.value,I=n-g+C.value-v,J=p===o.length-1?u:o[p+1].ownTop.value-h.ownTop.value;I>=0&&I<J&&!d.value&&(p&&!e.cssMode&&o[p-1].setDisabled(!0),h.setDisabled(!1),S(h))})},O=async(n,u)=>{var g;if(u&&((g=e.onClick)==null||g.call(e,n)),n===i.value)return;const v=o.find(({name:I})=>n===I.value);if(!v)return;const h=v.ownTop.value,p=ve(t.value);d.value=n,S(n),await _e(t.value,{left:p,top:h,animation:de,duration:X(e.duration)}),me(()=>{d.value=""})},G=n=>{he(()=>O(n,!0))};return ne(()=>r.value,()=>ae(()=>{o.forEach(({name:n,setOwnTop:u})=>{n.value&&m.value.push(n.value),u()})})),M(()=>{var n;a.value=fe(l.value),t.value=a.value===window?a.value.document.documentElement:a.value,(n=a.value)==null||n.addEventListener("scroll",k)}),te(()=>{var n;(n=a.value)==null||n.removeEventListener("scroll",k)}),{barEl:l,active:i,zIndex:A,anchorNameList:m,toNumber:X,scrollTo:G,anchorClick:O}}}),$e={class:"var-index-bar",ref:"barEl"},we=["onClick"];function De(e,r,o,s,t,d){return _(),b("div",$e,[V(e.$slots,"default"),L("ul",{class:"var-index-bar__anchor-list",style:$({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(_(!0),b(R,null,U(e.anchorNameList,a=>(_(),b("li",{key:a,class:oe(["var-index-bar__anchor-item",{"var-index-bar__anchor-item--active":e.active===a}]),style:$({color:e.active===a&&e.highlightColor?e.highlightColor:""}),onClick:l=>e.anchorClick(a)},f(a),15,we))),128))],4)],512)}var B=z(Se,[["render",De]]);B.install=function(e){e.component(B.name,B)};var ze={title:"\u6807\u9898",text:"\u6587\u672C"},Oe={title:"Title",text:"Text"};const{add:K,use:je,pack:Pe,packs:Qe,merge:We}=xe(),Le=e=>{Ce(e),je(e)};F("zh-CN",ye);F("en-US",be);K("zh-CN",ze);K("en-US",Oe);const Ve={name:"IndexBarExample",components:{VarIndexBar:B,VarIndexAnchor:Ne,VarCell:pe},setup(){const e=c([]),r=c("#e7edf7"),o=c("#2e67ba");M(()=>{for(let t=0;t<26;t++)e.value.push(String.fromCharCode(65+t))});const s=t=>{console.log(t)};return ke(Le),ce(t=>{r.value=t==="darkThemes"?"rgb(41 42 45)":"#e7edf7",o.value=t==="darkThemes"?"#3980e8":"#2e67ba"}),{color:o,bgColor:r,list:e,pack:Pe,change:s}}};function Me(e,r,o,s,t,d){const a=w("var-index-anchor"),l=w("var-cell"),m=w("var-index-bar");return _(),P(m,{onChange:s.change,duration:"300","sticky-offset-top":54},{default:y(()=>[(_(!0),b(R,null,U(s.list,i=>(_(),b("div",{key:i},[D(a,{index:i,class:"var-index-anchor__example",style:$({background:s.bgColor,color:s.color})},{default:y(()=>[T(f(s.pack.title)+" "+f(i),1)]),_:2},1032,["index","style"]),D(l,null,{default:y(()=>[T(f(i)+" "+f(s.pack.text),1)]),_:2},1024),D(l,null,{default:y(()=>[T(f(i)+" "+f(s.pack.text),1)]),_:2},1024)]))),128))]),_:1},8,["onChange"])}var Ze=z(Ve,[["render",Me]]);export{Ze as default};
